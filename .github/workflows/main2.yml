name: Test Simple Login

on: [push]

jobs:
  test:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout
      uses: actions/checkout@v3
    
    - name: Test Docker Login (Debug)
      env:
        USER: ${{ secrets.ALIYUN_USERNAME }}
        PASS: ${{ secrets.ALIYUN_PASSWORD }}
      run: |
        echo "Username length: ${#USER}"
        echo "Password length: ${#PASS}"
        echo "Namespace: ${{ secrets.ALIYUN_NAMESPACE }}"
        
        # 测试登录
        if echo "$PASS" | docker login --username "$USER" --password-stdin registry.cn-hangzhou.aliyuncs.com; then
          echo "✅ Docker login successful!"
        else
          echo "❌ Docker login failed"
        fi
